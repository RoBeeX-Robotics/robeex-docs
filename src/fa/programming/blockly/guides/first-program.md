# نوشتن اولین برنامه Blockly

این راهنمای کوتاه شما را گام‌به‌گام در ساخت یک برنامه ساده و عملی Blockly برای دستگاه RoBeeX راهنمایی می‌کند. در این راهنما یاد می‌گیرید چگونه ویرایشگر را باز کنید، بلوک‌ها را کنار هم قرار دهید، برنامه را اجرا کنید و مشکلات معمول را رفع کنید.

آنچه می‌سازید: یک توالی تکرارشونده LED که رنگ را تغییر می‌دهد و مکث می‌کند — راهی ساده و قابل مشاهده برای اطمینان از پاسخ‌دهی دستگاه به برنامه شما.

## پیش‌نیازها

- نصب اپلیکیشن RoBeeX روی کامپیوتر یا گوشی موبایل
- یک دستگاه RoBeeX روشن و متصل به کامپیوتر یا گوشی موبایل
- ویرایشگر Blockly باز در دستگاه شما (صفحه RoBeeX App → Programming → Blockly را ببینید).
- آشنایی پایه با کشیدن و اتصال بلوک‌ها در ویرایشگر.

اگر هنوز اتصال دستگاه را ندارید، باز هم می‌توانید مراحل را در ویرایشگر دنبال کنید و بعداً وقتی دستگاه در دسترس شد اجرا کنید.


::: tip
می‌توانید برنامه‌های Blockly را بدون اتصال به دستگاه اجرا کنید، در صورتی که از بلوک‌های مرتبط با دستگاه (پرواز، LEDها و غیره) استفاده نمی‌کنید.
:::

## نمای کلی سریع از بلوک‌هایی که استفاده می‌کنیم

- بلوک شروع / When run — نقطه ورود برنامه.
- حلقه‌ها (تکرار بی‌نهایت یا تکرار N بار) — برای تکرار توالی.
- نور / بلوک تنظیم LED RGB — برای تغییر رنگ LED.
- زمان‌بندی / بلوک صبر (Wait) — برای ایجاد مکث بین تغییر رنگ‌ها.
- (اختیاری) موتور / بلوک‌های حرکت — برای افزودن حرکت پس از توالی LED.

بخش `Block categories` را در سمت چپ باز کنید تا این بلوک‌ها را بیابید. اگر بلوکی را پیدا نکردید، از جستجوی ویرایشگر استفاده کنید یا مرجع `block-categories` در مستندات را بررسی کنید.


## نقطه ورودی برنامه

هر برنامه Blockly از این بلوک شروع به اجرا می‌کند

<div style="padding: 5px 0;">
<div _ngcontent-ng-c1592021296="" id="blocklyArea" style="height: 55.25px">
    <div _ngcontent-ng-c1592021296="" id="blocklyDiv">
        <div class="injectionDiv geras-renderer dark-theme" tabindex="0" aria-label="Blockly Workspace" dir="LTR">
            <svg xmlns="http://www.w3.org/2000/svg" xmlns:html="http://www.w3.org/1999/xhtml" xmlns:xlink="http://www.w3.org/1999/xlink" version="1.1" class="blocklySvg" tabindex="0" style="background-color: transparent;" width="157.0238037109375" height="55.25">
<g data-id="Rj1a@rI0kMB4GBq?1;()" class="blocklyDraggable" transform=""><path class="blocklyPathDark" transform="translate(1,1)" fill="#c29b00" d=" m 0,15  h 0  c 30,-15  70,-15  100,0  h 56.02378845214844  v 20  H 156.02378845214844  V 20  H 156.02378845214844  V 45  H 156.02378845214844  V 45  V 49  h -126.52378845214844  l -6,4  -3,0  -6,-4  h -6.5 a 8 8 0 0,1 -8,-8 z
"></path><path class="blocklyPath" stroke="none" fill="#f2c200" d=" m 0,15  h 0  c 30,-15  70,-15  100,0  h 56.02378845214844  v 20  H 156.02378845214844  V 20  H 156.02378845214844  V 45  H 156.02378845214844  V 45  V 49  h -126.52378845214844  l -6,4  -3,0  -6,-4  h -6.5 a 8 8 0 0,1 -8,-8 z
"></path><path class="blocklyPathLight" stroke="#f6d44d" d=" m 0,15  m 0.5,0.5  c 17.8,-9.2  45.3,-14.9  75,-8.7  M 100.5,15.5  H 155.52378845214844  H 155.52378845214844  M 0,49  m 2.6966991411008934,-2.6966991411008934 a 7.5 7.5 0 0,1 -2.1966991411008934,-5.303300858899107  V 15.5 
"></path><g transform="translate(10,20)"><text class="blocklyText" x="0" y="13">When</text></g><g transform="translate(59.889617919921875,20)"><image height="24px" width="24px" alt="logo" xlink:href="/assets/icon/play-arrow.svg"></image></g><g transform="translate(93.88961791992188,20)"><text class="blocklyText" x="0" y="13">Clicked</text></g></g>
            </svg>
        </div>
    </div>
</div>
</div>



## گام‌به‌گام: ساخت توالی LED

1. ایجاد نقطه ورود برنامه

	- بلوک اصلی `when run` (یا `on start`) را به workspace بکشید. این بلوک هنگام آپلود یا اجرای برنامه اجرا می‌شود.

2. افزودن حلقه بی‌نهایت

	- از دسته `Loops`، بلوک `repeat forever` (یا `forever`) را بکشید و زیر بلوک `when run` الصاق کنید. این کار باعث می‌شود توالی LED تا زمان توقف دستگاه اجرا شود.

3. تنظیم رنگ اول LED

	- از دسته `Lights` (یا `LED`) بلوکی را با عنوان `set RGB LED to color` (یا مشابه) پیدا کنید و آن را داخل حلقه قرار دهید.
	- یک رنگ انتخاب کنید (برای مثال: قرمز). بسیاری از ویرایشگرها ابزار انتخاب رنگ دارند — از `#FF0000` برای قرمز استفاده کنید.

4. صبر

	- از دسته `Timing` بلوک `wait` را بکشید (مثلاً `wait 500 ms` یا `wait 1 second`) و زیر بلوک LED قرار دهید. برای چشمک واضح از 500–1000 میلی‌ثانیه استفاده کنید.

5. تغییر به رنگ بعدی

	- یک بلوک دیگر `set RGB LED to color` اضافه کنید و رنگ دیگری انتخاب کنید (مثلاً سبز `#00FF00`).
	- پس از آن یک بلوک `wait` متصل کنید.

6. (اختیاری) افزودن رنگ سوم یا افکت‌ها

	- می‌توانید آبی، سفید یا یک رنگ تصادفی اضافه کنید. همچنین می‌توان از بلوک‌های تنظیم روشنایی یا افکت‌های رنگین‌کمانی استفاده کرد اگر برد شما از آنها پشتیبانی کند.

7. آزمایش برنامه

	- برنامه را در ویرایشگر ذخیره یا دانلود کنید. اگر اتصال مستقیم به دستگاه دارید (USB/Wi‑Fi/Bluetooth)، برنامه را با کنترل `Upload` / `Run` ویرایشگر به دستگاه آپلود کنید.
	- اگر ویرایشگر شبیه‌ساز دارد، برای مشاهده پیش‌نمایش رفتار، روی `Run` کلیک کنید.

## نمونه چینش بلوک (نمای بصری)

تصور کنید این پشته عمودی داخل workspace قرار دارد:

- when run
  - repeat forever
	 - set RGB LED to red
	 - wait 500 ms
	 - set RGB LED to green
	 - wait 500 ms

در صورت امکان اسکرین‌شات اضافه کنید: `assets/blockly/first-program-stack.png` (یا از قابلیت صادر کردن تصویر ویرایشگر استفاده کنید). اگر اسکرین‌شات اضافه می‌کنید، آن را در `src/assets` قرار دهید و مسیر نسبی را در مستندات ارجاع دهید.

## نکات آزمایش

- اگر LED تغییر نمی‌کند، از روشن و متصل بودن دستگاه مطمئن شوید. LED قدرت دستگاه و تنظیمات اتصال در ویرایشگر را بررسی کنید.
- زمان‌های wait را تا 1000 میلی‌ثانیه افزایش دهید تا هر رنگ واضح‌تر دیده شود.
- اگر آپلود ناموفق است، به پیام خطا در ویرایشگر دقت کنید: علت‌های رایج شامل درایورهای حذف‌شده، دسترسی USB مسدود یا قرار داشتن دستگاه در حالت بوت‌لودر به جای حالت اجرای عادی است.

## مشکلات رایج و رفع اشکال

- عدم اتصال به دستگاه

  - کابل را مجدداً وصل کنید یا بلوتوث را دوباره جفت کنید. اگر مشکل ادامه داشت، ویرایشگر/مرورگر را ری‌استارت کنید.
  - در لینوکس مطمئن شوید که دسترسی به دستگاه‌های سریال/USB دارید (کاربر را به گروه `dialout` اضافه کنید یا ویرایشگر را با مجوز مناسب اجرا کنید).

- برنامه اجرا می‌شود اما LED تغییر نمی‌کند

  - بلوک LED مناسب برای سخت‌افزار خود را تأیید کنید. برخی بردها بلوک‌های جدا برای `top LED`، `bottom LED` یا `RGB module` دارند.
  - مطمئن شوید LED توسط برنامه دیگری روی دستگاه کنترل نشده است (ابتدا برنامه‌های دیگر را متوقف کنید).

- خطاها یا تایم‌اوت‌های آپلود

  - کابل، انتخاب پورت در ویرایشگر و وضعیت دستگاه (عدم قرارگیری در حالت بوت‌لودر مگر در صورت نیاز فلش) را بررسی کنید.

## قدم‌های بعدی

- اضافه کردن حرکت: پس از توالی LED، یک بلوک کوتاه `move forward` اضافه کنید تا ربات هنگام چشمک زدن حرکت کند.
- یادگیری سنسورها: از سنسور فاصله یا نور بخوانید و رنگ LED را بر اساس مقدار تغییر دهید (اگر برد شما این سنسورها را دارد).
- مرجع بلوک‌ها را بخوانید: صفحه `src/programming/blockly/references/overview.md` و صفحات `block-categories` را برای جزئیات کامل بلوک‌ها مشاهده کنید.

## راه‌های دریافت کمک

- فهرست مستندات `Programming → Blockly` شامل مثال‌های بیشتری و پروژه‌های نمونه قابل دانلود است.
- اگر مشکلی داشتید، یک issue در مخزن پروژه باز کنید یا انجمن جامعه را برای نکات مخصوص دستگاه بررسی کنید.

---
